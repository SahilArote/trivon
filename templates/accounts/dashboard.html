{% extends "base.html" %}
{% block content %}

<style>
/* ================= DASHBOARD BASE ================= */
.dashboard-section {
    background: #f4f6fb;
    padding: 30px 0;
}

.dashboard-container {
    max-width: 1200px;
    margin: auto;
    padding: 0 15px;
}

.dashboard-layout {
    display: flex;
    gap: 25px;
}

/* ================= MAIN CONTENT ================= */
.dashboard-main {
    flex: 1;
}

/* Header */
.account-header {
    background: linear-gradient(135deg, #111827, #1f2933);
    color: #fff;
    border-radius: 16px;
    padding: 25px;
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
}

.account-header img {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    border: 3px solid rgba(255,255,255,0.3);
}

.account-header h3 {
    margin: 0;
}

.account-header p {
    margin: 4px 0 0;
    font-size: 14px;
    opacity: 0.9;
}

/* ================= STATS ================= */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 25px;
}

.stat-card {
    background: #fff;
    padding: 22px;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.stat-card span {
    font-size: 13px;
    color: #6b7280;
}

.stat-card h6 {
    margin: 12px 0 0;
}
.stat-card h5 {
    margin: 12px 0 0;
}


.stat-card a {
    font-size: 14px;
    color: #2563eb;
    text-decoration: none;
}

/* ================= INFO ================= */
.info-card {
    background: #fff;
    padding: 22px;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.info-card h4 {
    margin-bottom: 12px;
}

/* ================= MOBILE ================= */
@media (max-width: 768px) {
    .dashboard-layout {
        flex-direction: column;
    }

    .stats-grid {
        grid-template-columns: 1fr 1fr; /* one row, two items */
		text-align: center;
		margin-bottom: 15px;

    }
	.stat-card h6{
		margin: 12px 0 0;
		
	}
	.stat-card h5{
		margin: 12px 0 0;
		
	}
}
</style>

<section class="dashboard-section">
    {% include "includes/alerts.html" %}

    <div class="dashboard-container">
        <div class="dashboard-layout">

            {% include 'includes/dashboard_sidebar.html' %}

            <main class="dashboard-main">

                <!-- ACCOUNT HEADER -->
                <div class="account-header">
                    <img src="{{ userprofile.profile_picture.url }}" alt="User">
                    <div>
                        <h3>{{ user.full_name }}</h3>
                        <p>{{ user.email }}</p>
                    </div>
                </div>

                <!-- STATS -->
                <div class="stats-grid">

                    <!-- Total Orders -->
                    <div class="stat-card">
                        <span>Total Orders</span>
                        <h5>{{ orders_count }}</h5> 
                        <a href="{% url 'my_orders' %}">View Orders</a>
                    </div>

                    <!-- Phone Number -->
                    <div class="stat-card">
                        <span>Phone Number</span>

                        {% if user.phone_number %}
                            <h6>{{ user.phone_number }}</h6>
                        {% else %}
                            <a href="{% url 'edit_profile' %}">Update Phone Number</a>
                        {% endif %}
                    </div>

                </div>

                <!-- ADDRESS CARD -->
                <div class="info-card">
                    <h4>Default Address</h4>

                    {% if userprofile.address_line_1 %}
                        <p>
                            {{ userprofile.address_line_1 }}<br>
                            {{ userprofile.city }}, {{ userprofile.state }}<br>
                            {{ userprofile.country }}
                        </p>
                    {% else %}
                        <p>
                            Address not added.<br>
                            <a href="{% url 'edit_profile' %}">Add Address</a>
                        </p>
                    {% endif %}
                </div>

            </main>
        </div>
    </div>
</section>

{% endblock %}
